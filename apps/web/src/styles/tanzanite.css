:root{
  /* Layout tokens */
  --vh: 100svh;
  --header-h: 48px;  /* Reduced header height */
  --nav-h: 60px;     /* Slightly reduced nav height */
  --rail-gap: 12px;

  /* Theme */
  --tnz-bg: #070f1e;
  --tnz-fg: #eaf1ff;
  --tnz-glass: rgba(9,16,33,.6);
  --tnz-accent: #6da8ff;
  --tnz-danger: #ff627e;

  --tnz-border: rgba(150,170,255,.20);
  --tnz-glow: 0 10px 30px rgba(86,121,255,.25);
}
@supports(height: 100dvh){ :root{ --vh: 100dvh; } }

html,body,#root{height:100%; background:var(--tnz-bg); color:var(--tnz-fg);}

.tnz-glass{
  backdrop-filter: saturate(140%) blur(16px);
  background: linear-gradient(180deg, rgba(120,134,255,.18), rgba(120,134,255,.08)), var(--tnz-glass);
  border: 1px solid var(--tnz-border);
  box-shadow: var(--tnz-glow);
}

.app-shell{
  height: var(--vh);
  display: flex;
  flex-direction: column;
  position: relative;
}

.app-header{
  height: var(--header-h);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 60;
  padding-top: env(safe-area-inset-top);
}
.app-header.auto-hide{ will-change: transform; transition: transform .18s ease; }
.app-header.hidden{ transform: translateY(-100%); }

.app-content{
  flex: 1;
  overflow: auto;
  scroll-snap-type: y mandatory;
  -webkit-overflow-scrolling: touch;
  padding-top: calc(var(--header-h) + env(safe-area-inset-top));
  padding-bottom: calc(var(--nav-h) + env(safe-area-inset-bottom));
}

/* Bottom nav (always visible) */
.bottom-nav{
  position: sticky; bottom: 0;
  height: var(--nav-h);
  z-index: 9999;
  padding-bottom: calc(env(safe-area-inset-bottom) + 8px);
}
.bottom-nav ul{
  height: 100%;
  display: grid;
  grid-auto-flow: column;
  justify-content: space-around;
  align-items: center;
  font-size: clamp(10px, 1.8vw, 12px);
  list-style: none;
  margin: 0;
  padding: 0;
}

/* Feed item */
.feed-item{
  position: relative;
  height: calc(var(--vh) - var(--header-h));
  scroll-snap-align: start;
  overflow: hidden;
}
.feed-media{
  position:absolute; inset:0;
  width:100%; height:100%; object-fit:cover;
}

/* Right action rail + caption are offset above the nav */
.right-rail{
  position:absolute; right: 12px;
  bottom: calc(var(--nav-h) + env(safe-area-inset-bottom) + 12px);
  display:flex; flex-direction:column; gap: var(--rail-gap);
  z-index: 50;
}
.rail-btn{
  width:56px; height:56px; border-radius:16px;
  display:grid; place-items:center;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}
.rail-btn:hover{
  transform: scale(1.05);
}
.rail-btn:active{
  transform: scale(0.95);
}
.rail-count{ 
  font-size:12px; text-align:center; opacity:.9; margin-top:4px; 
  color: var(--tnz-fg);
  font-weight: 600;
}

/* Caption + bottom fade (never block taps) */
.bottom-fade{
  position:absolute; left:0; right:0;
  bottom: calc(var(--nav-h) + env(safe-area-inset-bottom));
  height: 120px; pointer-events:none;
  background: linear-gradient(0deg, rgba(0,0,0,.72), rgba(0,0,0,.24), transparent);
}
.caption{
  position:absolute; left: 16px; right: 16px;
  bottom: calc(var(--nav-h) + env(safe-area-inset-bottom) + 12px);
  padding:12px 14px; border-radius:14px; z-index:50;
  max-width:min(720px, 92vw);
  font-size: clamp(12px, 2.2vw, 14px);
}
.caption .user{ font-weight:700; margin-right:8px;}
.caption .live{ color: var(--tnz-danger); font-weight:700; margin-left:4px;}
.caption .more{ opacity:.8; margin-left:6px; cursor: pointer; }

/* Tabs (Following / Friends / For You) */
.tabs{
  display:flex; gap:18px; align-items:center; justify-content:center;
  height:100%;
  font-weight:600;
}
.tab{ 
  opacity:.7; position:relative; 
  cursor: pointer;
  padding: 8px 12px;
  transition: opacity 0.2s ease;
}
.tab:hover{
  opacity: 0.9;
}
.tab.active{ opacity:1; }
.tab.active::after{
  content:""; position:absolute; left:0; right:0; bottom:-8px; height:3px;
  border-radius:2px; background: linear-gradient(90deg, #8bd3ff, #7d6bff);
}

/* Kill any rogue container clipping the nav */
*[style*="overflow: hidden"] .bottom-nav{ position: sticky !important; }

/* Additional responsive improvements */
@media (max-width: 480px) {
  .right-rail {
    right: 8px;
    gap: 8px;
  }
  
  .rail-btn {
    width: 48px;
    height: 48px;
  }
  
  .caption {
    left: 12px;
    right: 12px;
    padding: 10px 12px;
  }
  
  .tabs {
    gap: 12px;
  }
}

/* Improved touch targets */
@media (hover: none) and (pointer: coarse) {
  .rail-btn {
    min-height: 44px;
    min-width: 44px;
  }
  
  .tab {
    min-height: 44px;
    display: flex;
    align-items: center;
  }
}
