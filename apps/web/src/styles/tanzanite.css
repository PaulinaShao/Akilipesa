/* Tanzanite Gemstone Brand Theme */
:root{
  --tz-ink:        #eaf2ff;              /* text on dark */
  --tz-ink-dim:    #b8c7ff;
  --tz-bg:         #0a0f24;              /* deep night */
  --tz-glass:      rgba(18, 26, 58, .55);
  --tz-border:     rgba(130, 170, 255, .18);

  /* tanzanite gemstone gradient */
  --tz-g1:#1d2b64; /* deep sapphire */
  --tz-g2:#8f5cff; /* violet */
  --tz-g3:#2ec5ff; /* ice blue edge */

  /* Enhanced layout tokens */
  --tnz-surface: 16,25,48;           /* deep sapphire */
  --tnz-accent:  98,84,255;          /* tanzanite glow */
  --tnz-glass:   255,255,255;        /* glass highlights */
  --tnz-blur:    18px;
}

.tz-bg      { background: var(--tz-bg); color: var(--tz-ink); }
.tz-text-dim{ color: var(--tz-ink-dim); }

/* subtle glass—cheap to render vs heavy blur */
.tz-glass {
  background: linear-gradient( to bottom, var(--tz-glass), rgba(10,15,36,.35) );
  border: 1px solid var(--tz-border);
  border-radius: 16px;
  backdrop-filter: blur(6px); /* keep ≤ 6 for perf */
  will-change: transform; /* performance hint for animations */
}

/* gemstone "shine" border */
.tz-gem-border {
  border: 1px solid transparent;
  background:
    linear-gradient(var(--tz-bg), var(--tz-bg)) padding-box,
    linear-gradient(120deg, var(--tz-g1), var(--tz-g2), var(--tz-g3)) border-box;
  border-radius: 16px;
}

/* top legibility veil for videos */
.tz-top-veil { 
  pointer-events:none; 
  background: linear-gradient(to bottom, rgba(0,0,0,.55), transparent 70%);
}

/* shimmer accent (very light) */
@keyframes tz-shimmer {
  0%{ background-position:-200% 0 } 100%{ background-position:200% 0 }
}
.tz-shimmer {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
  background-size: 200% 100%;
  animation: tz-shimmer 1400ms linear infinite;
  will-change: background-position; /* performance hint */
}

/* Global viewport and navigation variables */
:root{
  --nav-h: 64px;         /* bottom nav height */
  --vh: 100svh;          /* stable mobile viewport */
  --tnz-surface: 16,25,48;
}
@supports (height: 100dvh){
  :root{ --vh: 100dvh; } /* Safari/Chrome modern fix */
}

/* All scrollable screens must reserve space for the bottom nav */
.scroll-screen{
  min-height: var(--vh);
  padding-bottom: calc(var(--nav-h) + env(safe-area-inset-bottom));
  -webkit-overflow-scrolling: touch;
}

/* glossy tanzanite "glass" - enhanced version */
.tnz-glass{
  backdrop-filter: blur(var(--tnz-blur));
  -webkit-backdrop-filter: blur(var(--tnz-blur));
  background: linear-gradient(
    180deg,
    rgba(var(--tnz-glass),0.12),
    rgba(var(--tnz-accent),0.15)
  );
  border: 1px solid rgba(255,255,255,.18);
  box-shadow:
    0 6px 24px rgba(98,84,255,.22),
    inset 0 1px 0 rgba(255,255,255,.25);
}

/* rail buttons */
.rail-btn{
  backdrop-filter: blur(var(--tnz-blur));
  -webkit-backdrop-filter: blur(var(--tnz-blur));
  background: linear-gradient(
    180deg,
    rgba(var(--tnz-glass),0.12),
    rgba(var(--tnz-accent),0.15)
  );
  border: 1px solid rgba(255,255,255,.18);
  box-shadow:
    0 6px 24px rgba(98,84,255,.22),
    inset 0 1px 0 rgba(255,255,255,.25);
  @apply rounded-2xl w-12 h-12 flex items-center justify-center text-white transition-transform active:scale-95;
}

/* caption clamp */
.caption{
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.caption.expanded {
  -webkit-line-clamp: unset;
  display: block;
}

/* line clamp utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Performance optimizations */
.tz-optimized {
  transform: translateZ(0); /* force GPU acceleration */
  backface-visibility: hidden; /* prevent flicker */
}

/* Z-index contract for proper stacking - STRICT HIERARCHY */
/* Bottom-nav: z-[9999] (highest - always visible) */
/* Header: z-[60] (top bars, headers) */
/* Right action rail: z-[50] (interactive elements) */
/* Bottom overlays / caption glass: z-[40] (or less) */
/* Content: default (z-auto) */

/* Enforce bottom nav visibility */
.bottom-nav {
  z-index: 9999 !important;
}

/* Header elements */
.header-element {
  z-index: 60 !important;
}

/* Action rails */
.action-rail {
  z-index: 50 !important;
}

/* Feed overlays */
.feed-overlay {
  z-index: 40 !important;
}

/* Action button optimizations */
.tz-action-button {
  will-change: transform;
  transform: translateZ(0);
  transition: transform 0.15s ease-out;
}

.tz-action-button:hover {
  transform: translateZ(0) scale(1.05);
}

.tz-action-button:active {
  transform: translateZ(0) scale(0.95);
}
