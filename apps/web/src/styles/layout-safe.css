/* Layout Safe - Responsive Design System */
:root{
  --nav-h: 60px;                      /* bottom nav visual height */
  --safe-b: env(safe-area-inset-bottom, 0px);
  --nav-total: calc(var(--nav-h) + var(--safe-b));
  --vh: 100vh;
  --dvh: 100dvh;
}

/* dynamic viewport fallbacks */
.min-h-dvh { min-height: 100vh; }
@supports (height: 100dvh) { .min-h-dvh { min-height: 100dvh; } }
@supports (height: 100svh) { .min-h-dvh { min-height: 100svh; } }

/* Responsive viewport utilities */
.h-screen-safe {
  height: 100vh;
  height: var(--vh, 100vh);
}
@supports (height: 100dvh) {
  .h-screen-safe { height: 100dvh; }
}

.min-h-screen-safe {
  min-height: 100vh;
  min-height: var(--vh, 100vh);
}
@supports (min-height: 100dvh) {
  .min-h-screen-safe { min-height: 100dvh; }
}

/* padding for screens so content never sits under the nav */
.pb-safe-nav { padding-bottom: var(--nav-total); }
.scroll-screen {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
  scroll-padding-bottom: var(--nav-total);
}

/* bottom nav sizing with safe area */
.bottom-nav {
  height: var(--nav-total);
  padding-bottom: var(--safe-b);
  min-height: var(--nav-h);
}

/* Performance optimizations for scrolling */
.scroll-screen {
  will-change: scroll-position;
  contain: layout style paint;
}

/* Hide scrollbars but keep functionality */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Mobile-specific bottom nav improvements */
@media (max-width: 640px) {
  :root {
    --nav-h: 70px; /* ensure enough height on mobile */
  }

  .bottom-nav {
    padding-bottom: max(env(safe-area-inset-bottom), 12px);
    min-height: 70px;
  }
}

/* Ensure minimum viewport height on mobile */
@media (max-height: 700px) {
  .scroll-screen {
    min-height: 100vh; /* fallback for very short screens */
  }
}

/* Mobile responsive improvements */
@media (hover: none) and (pointer: coarse) {
  .tz-action-button {
    min-height: 48px;
    min-width: 48px;
  }

  .bottom-nav-container {
    padding-bottom: max(env(safe-area-inset-bottom), 12px);
    min-height: 60px;
  }
}

/* Responsive navigation visibility */
.bottom-nav-container {
  display: flex !important;
  flex-direction: column !important;
  background-color: #000000 !important;
  border-top: 1px solid rgba(255, 255, 255, 0.2) !important;
  position: relative !important;
}

@media (max-width: 768px) {
  .bottom-nav-container {
    min-height: 65px !important;
  }

  html, body {
    overflow-x: hidden;
  }
}

/* Responsive layout foundation */
* {
  box-sizing: border-box;
}

html {
  height: 100%;
  overflow-x: hidden;
}

body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

#root {
  height: 100vh;
  height: 100dvh;
  height: calc(var(--vh, 1vh) * 100);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Navigation styling */
.bottom-nav-container button {
  color: #ffffff !important;
  transition: all 0.2s ease !important;
}

.bottom-nav-container button:hover {
  color: #ffffff !important;
  transform: scale(1.05) !important;
}

/* Prevent any parent containers from hiding the navigation */
body, #root, main {
  position: relative;
}

/* Ensure minimum body height accounts for navigation */
@media (max-width: 768px) {
  body {
    padding-bottom: var(--nav-total, 70px);
  }
}
