/* Layout Safe - Persistent Bottom Nav + Smart Scrolling */
:root{
  --nav-h: 64px;                      /* bottom nav visual height */
  --safe-b: env(safe-area-inset-bottom, 0px);
  --nav-total: calc(var(--nav-h) + var(--safe-b));
}

/* dynamic viewport fallbacks */
.min-h-dvh { min-height: 100vh; }
@supports (height: 100dvh) { .min-h-dvh { min-height: 100dvh; } }
@supports (height: 100svh) { .min-h-dvh { min-height: 100svh; } }

/* Safe area utilities - used throughout the app */
.h-screen-safe {
  height: 100vh;
  height: 100dvh;
}
.min-h-screen-safe {
  min-height: 100vh;
  min-height: 100dvh;
}

/* padding for screens so content never sits under the nav */
.pb-safe-nav { padding-bottom: var(--nav-total); }
.scroll-screen {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
  scroll-padding-bottom: var(--nav-total);
}

/* bottom nav sizing with safe area */
.bottom-nav {
  height: var(--nav-total);
  padding-bottom: var(--safe-b);
  min-height: var(--nav-h);
}

/* Performance optimizations for scrolling */
.scroll-screen {
  will-change: scroll-position;
  contain: layout style paint;
}

/* Hide scrollbars but keep functionality */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Mobile-specific bottom nav improvements */
@media (max-width: 640px) {
  :root {
    --nav-h: 70px; /* ensure enough height on mobile */
  }

  .bottom-nav {
    padding-bottom: max(env(safe-area-inset-bottom), 12px);
    min-height: 70px;
  }
}

/* Ensure minimum viewport height on mobile */
@media (max-height: 700px) {
  .scroll-screen {
    min-height: 100vh; /* fallback for very short screens */
  }
}

/* Better touch targets for mobile */
@media (hover: none) and (pointer: coarse) {
  .tz-action-button {
    min-height: 48px;
    min-width: 48px;
  }

  .bottom-nav {
    padding-bottom: max(var(--safe-b), 8px); /* ensure minimum padding */
  }
}

/* Force visibility on mobile screens */
@media (max-width: 768px) {
  .bottom-nav {
    display: block !important;
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 9999 !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    background-color: rgba(0, 0, 0, 0.95) !important;
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
  }
}

/* Ensure the nav is always visible regardless of screen size */
.bottom-nav {
  display: block !important;
  position: fixed !important;
  visibility: visible !important;
  opacity: 1 !important;
  transform: none !important;
  bottom: 0 !important;
  width: 100% !important;
  background: rgba(0, 0, 0, 0.95) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
}

/* Instagram/TikTok style navigation styling */
.bottom-nav button {
  color: #ffffff !important;
  transition: all 0.2s ease !important;
}

.bottom-nav button:hover {
  color: #ffffff !important;
  transform: scale(1.1) !important;
}

/* Prevent any parent containers from hiding the navigation */
body, #root, main {
  position: relative;
}

/* Ensure minimum body height accounts for navigation */
@media (max-width: 768px) {
  body {
    padding-bottom: var(--nav-total, 70px);
  }
}
