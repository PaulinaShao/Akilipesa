@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

/* Import sparkle animations */
@import './styles/sparkle.css';

/* Import Tanzanite brand design system */
@import './styles/tanzanite.css';

@layer base {
  :root {
    --color-bg-primary: #0B0B1A;
    --color-bg-secondary: #130D22;
    --color-bg-card: rgba(19, 17, 37, 0.5);
    --color-primary: #6E3CE6;
    --color-secondary: #2C3CFF;
    --color-accent: #6BB6FF;
    --color-text-primary: #EDECF7;
    --color-text-secondary: #B2ACCF;
    --color-text-muted: #6B6B8A;

    color-scheme: dark;
  }
  
  * {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
  }
  
  html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
    font-size: 16px;
  }
  
  body {
    @apply font-sans text-white antialiased min-h-screen-safe overflow-x-hidden;
    background: radial-gradient(ellipse at center, #0B0B1A 0%, #130D22 100%);
    font-size: 16px;
    line-height: 1.25;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Mobile optimization */
  @media (max-width: 768px) {
    body {
      overscroll-behavior: none;
      -webkit-overflow-scrolling: touch;
    }
  }
  
  /* Hide scrollbars but keep functionality */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Focus styles */
  .focus-outline {
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-transparent;
  }
}

@layer components {
  /* Glass morphism effects */
  .glass {
    background: rgba(20, 16, 32, 0.72);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .glass-light {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  
  .glass-heavy {
    background: rgba(20, 16, 32, 0.9);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.15);
  }
  
  /* Button styles */
  .btn-primary {
    @apply bg-primary hover:bg-primary/90 text-white font-semibold px-6 py-3 rounded-2xl;
    @apply transition-all duration-200 shadow-lg hover:shadow-xl;
    @apply focus-outline active:scale-95;
    background: var(--tz-gradient);
    box-shadow: var(--shadow-glow);
  }

  .btn-primary:hover {
    box-shadow: 0 8px 30px rgba(110, 60, 230, 0.4);
    transform: translateY(-1px);
  }
  
  .btn-secondary {
    @apply bg-white/10 hover:bg-white/20 text-white font-semibold px-6 py-3 rounded-2xl;
    @apply border border-white/20 transition-all duration-200;
    @apply focus-outline active:scale-95;
  }
  
  .btn-outline {
    @apply bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-white;
    @apply font-semibold px-6 py-3 rounded-2xl transition-all duration-200;
    @apply focus-outline active:scale-95;
  }
  
  .btn-success {
    @apply bg-accent hover:bg-accent/90 text-black font-semibold px-6 py-3 rounded-2xl;
    @apply transition-all duration-200 shadow-lg hover:shadow-xl;
    @apply focus-outline active:scale-95;
  }
  
  .btn-fab {
    @apply w-14 h-14 bg-gradient-to-br from-primary to-secondary rounded-full;
    @apply flex items-center justify-center shadow-lg hover:shadow-xl;
    @apply transition-all duration-200 hover:scale-110 active:scale-95;
    @apply focus-outline;
    box-shadow: 0 4px 20px rgba(138, 92, 246, 0.4);
  }
  
  /* Input styles */
  .input-field {
    @apply w-full px-4 py-4 rounded-2xl glass text-white placeholder:text-white/50;
    @apply border border-white/20 focus:border-primary transition-all duration-200;
    @apply text-base focus-outline;
    font-size: 16px; /* Prevent zoom on iOS */
  }
  
  .input-field:focus {
    background: rgba(20, 16, 32, 0.9);
    border-color: #8A5CF6;
    box-shadow: 0 0 0 2px rgba(138, 92, 246, 0.2);
  }
  
  .input-label {
    @apply block text-white font-medium mb-2 text-sm;
  }
  
  .input-error {
    @apply text-red-400 text-xs mt-1;
  }
  
  /* Card styles */
  .card {
    @apply glass rounded-3xl p-6 transition-all duration-200;
  }
  
  .card-hover {
    @apply card hover:shadow-lg hover:scale-[1.02];
  }
  
  /* Navigation styles */
  .nav-tab {
    @apply flex flex-col items-center justify-center py-2 px-3 transition-all duration-200;
    @apply text-white/60 hover:text-white;
  }
  
  .nav-tab.active {
    @apply text-primary;
  }
  
  .nav-tab-icon {
    @apply w-6 h-6 mb-1 transition-all duration-200;
  }
  
  .nav-tab.active .nav-tab-icon {
    filter: drop-shadow(0 0 8px rgba(138, 92, 246, 0.8));
  }
  
  /* Typography */
  .heading-1 {
    @apply text-4xl md:text-5xl font-bold text-white;
  }
  
  .heading-2 {
    @apply text-2xl md:text-3xl font-bold text-white;
  }
  
  .heading-3 {
    @apply text-xl font-semibold text-white;
  }
  
  .text-body {
    @apply text-base text-white/80;
  }
  
  .text-muted {
    @apply text-sm text-white/60;
  }
  
  .text-gradient {
    @apply bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent;
  }
  
  /* Reel specific styles */
  .reel-container {
    @apply h-screen-safe w-full relative overflow-hidden bg-black;
    scroll-snap-type: y mandatory;
  }
  
  .reel-card {
    @apply h-screen-safe w-full relative flex-shrink-0;
    scroll-snap-align: start;
  }
  
  .reel-video {
    @apply absolute inset-0 w-full h-full object-cover;
  }
  
  .reel-overlay {
    @apply absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent;
  }
  
  .reel-content {
    @apply absolute bottom-0 left-0 right-16 p-4 z-10;
  }
  
  .reel-actions {
    @apply absolute right-3 bottom-20 flex flex-col items-center space-y-4 z-10;
  }
  
  .reel-action-btn {
    @apply w-12 h-12 rounded-full glass-light flex items-center justify-center;
    @apply text-white hover:scale-110 transition-transform duration-200;
    @apply active:scale-95;
  }
  
  .reel-action-btn.liked {
    @apply bg-red-500 text-white;
  }
  
  /* Bottom sheet and modals */
  .bottom-sheet {
    @apply fixed inset-x-0 bottom-0 z-50 glass-heavy rounded-t-3xl;
    @apply border-t border-white/20 max-h-[90vh] overflow-hidden;
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .bottom-sheet.open {
    transform: translateY(0);
  }
  
  .bottom-sheet-handle {
    @apply w-12 h-1 bg-white/30 rounded-full mx-auto my-3;
  }
  
  /* Loading skeletons */
  .skeleton {
    @apply relative overflow-hidden bg-white/10 rounded-2xl;
  }
  
  .skeleton::after {
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent;
    content: '';
    animation: shimmer 2s infinite;
  }
  
  /* Safe area handling */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Empty states */
  .empty-state {
    @apply text-center py-16 px-6;
  }
  
  .empty-state-icon {
    @apply w-16 h-16 mx-auto mb-4 text-white/30;
  }
  
  .empty-state-title {
    @apply text-xl font-semibold text-white mb-2;
  }
  
  .empty-state-description {
    @apply text-white/60 mb-6;
  }
  
  /* Accessibility */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }
  
  /* Animations */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }
  
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }
  
  .animate-shimmer {
    animation: shimmer 2s infinite;
  }
  
  /* Admin specific styles */
  .admin-layout {
    @apply min-h-screen bg-gradient-to-br from-slate-900 to-slate-800;
  }
  
  .admin-sidebar {
    @apply w-64 bg-slate-800/50 backdrop-blur-xl border-r border-slate-700;
  }
  
  .admin-main {
    @apply flex-1 overflow-auto;
  }
  
  .admin-card {
    @apply bg-slate-800/30 backdrop-blur-sm border border-slate-700 rounded-xl p-6;
  }
  
  .admin-table {
    @apply w-full bg-slate-800/20 rounded-xl overflow-hidden;
  }
  
  .admin-table th {
    @apply bg-slate-700/50 px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider;
  }
  
  .admin-table td {
    @apply px-6 py-4 whitespace-nowrap text-sm text-slate-200 border-t border-slate-700/50;
  }

  /* WalletChip styles */
  .wallet-chip {
    position: absolute;
    top: 12px;
    left: 12px;
    z-index: 50;
    height: 40px;
    max-width: 260px;
    padding: 8px 12px;
    border-radius: 16px;
    backdrop-filter: blur(10px);
    background: rgba(18, 14, 40, 0.35);
    border: 1px solid rgba(125, 92, 255, 0.35);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: opacity 0.2s ease, transform 0.2s ease;
    opacity: 1;
    transform: translateY(0);
    will-change: transform, opacity;
  }

  .wallet-chip:hover {
    background: rgba(18, 14, 40, 0.45);
    border-color: rgba(125, 92, 255, 0.5);
  }

  .wallet-chip.hide {
    opacity: 0;
    transform: translateY(-8px);
    pointer-events: none;
  }

  .wallet-chip .chip-icon {
    font-size: 16px;
    line-height: 1;
  }

  .wallet-chip .amount {
    font-size: 15px;
    font-weight: 600;
    color: white;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.4);
  }

  .wallet-chip .currency {
    font-size: 13px;
    font-weight: 500;
    opacity: 0.8;
  }

  .wallet-chip .plan-badge {
    font-size: 12px;
    font-weight: 500;
    padding: 2px 6px;
    border-radius: 8px;
    line-height: 1.2;
  }

  .wallet-chip .chevron {
    font-size: 18px;
    color: rgba(255, 255, 255, 0.6);
    font-weight: 300;
    margin-left: auto;
  }

  /* Desktop styles */
  @media (min-width: 768px) {
    .wallet-chip {
      left: 24px;
      max-width: 300px;
    }
  }

  /* Stories Rail styles */
  .stories-rail {
    position: absolute;
    top: 60px;
    left: 0;
    right: 0;
    z-index: 40;
    background: linear-gradient(180deg, rgba(11, 7, 18, 0.8) 0%, transparent 100%);
    backdrop-filter: blur(4px);
  }

  .stories-rail .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .stories-rail .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

@layer utilities {
  /* Custom utilities */
  .text-truncate {
    @apply overflow-hidden whitespace-nowrap text-ellipsis;
  }
  
  .flex-center {
    @apply flex items-center justify-center;
  }
  
  .flex-between {
    @apply flex items-center justify-between;
  }
  
  /* Aspect ratios */
  .aspect-reel {
    aspect-ratio: 9 / 16;
  }
  
  .aspect-square {
    aspect-ratio: 1 / 1;
  }
  
  /* Touch targets */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Hide on mobile/desktop */
  @media (max-width: 767px) {
    .hide-mobile {
      display: none !important;
    }
  }
  
  @media (min-width: 768px) {
    .hide-desktop {
      display: none !important;
    }
  }
  
  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .glass,
    .glass-light,
    .glass-heavy {
      @apply bg-black border-white;
    }
    
    .btn-primary {
      @apply bg-white text-black border-2 border-white;
    }
  }
}

/* Keyframes */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes scaleIn {
  from { transform: scale(0.9); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: rgba(138, 92, 246, 0.5);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(138, 92, 246, 0.7);
}
